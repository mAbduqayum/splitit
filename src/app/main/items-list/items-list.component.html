<div class="items-list">
	<h2>Items</h2>
	
	@if (items().length === 0) {
		<div class="no-items">
			<p>No items yet. Add some items above!</p>
		</div>
	} @else {
		<ul>
			@for (item of items(); track item.id) {
				<li>
					@if (editingItemId() === item.id) {
						<div class="edit-form">
							<input 
								type="text" 
								[(ngModel)]="editingItemName"
								(ngModelChange)="updateItemName(item.id)"
								(blur)="stopEdit()"
								(keyup.escape)="stopEdit()"
								(keyup.enter)="stopEdit()"
								class="edit-name-input"
								placeholder="Enter item name"
							/>
							<input 
								type="number" 
								[(ngModel)]="editingItemQuantity"
								(ngModelChange)="updateItemQuantity(item.id)"
								(blur)="stopEdit()"
								(keyup.escape)="stopEdit()"
								(keyup.enter)="stopEdit()"
								min="1"
								class="edit-quantity-input"
							/>
							<input 
								type="number" 
								[(ngModel)]="editingItemPrice"
								(ngModelChange)="updateItemPrice(item.id)"
								(blur)="stopEdit()"
								(keyup.escape)="stopEdit()"
								(keyup.enter)="stopEdit()"
								min="0"
								step="0.01"
								class="edit-price-input"
							/>
						</div>
					} @else {
						<div class="item-display" (dblclick)="startEdit(item.id, item.name, item.quantity, item.price)">
							<div class="item-content">
								<span class="item-name">{{ item.name }}</span>
								<div class="item-details">
									<span class="item-quantity">Qty: {{ item.quantity }}</span>
									<span class="item-price">${{ item.price.toFixed(2) }}</span>
									<span class="item-total">${{ (item.quantity * item.price).toFixed(2) }}</span>
								</div>
							</div>
							<div class="action-buttons">
								<button 
									appBtn="info" 
									(click)="startEdit(item.id, item.name, item.quantity, item.price)"
								>
									Edit
								</button>
								<button 
									appBtn="danger" 
									(click)="onRemoveItem(item.id)"
								>
									Remove
								</button>
							</div>
						</div>
					}
				</li>
			}
		</ul>
	}
</div>